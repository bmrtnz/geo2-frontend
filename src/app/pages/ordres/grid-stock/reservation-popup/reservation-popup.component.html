<dx-popup
  width="600"
  height="300"
  [dragEnabled]="false"
  [title]="'Réservation de stock'"
  (onHidden)="onHidden()"
  (onShown)="onShown()"
  [closeOnOutsideClick]="true"
>
  <div *dxTemplate="let d of 'content'">
    <form [formGroup]="formGroup">
      <!-- Champ commentaire -->
      <dx-text-box
        formControlName="commentaire"
        valueChangeEvent="keyup"
        [placeholder]="'commentaires'"
      >
        <dx-validator #validatorCommentaire>
          <dxi-validation-rule type="required"> </dxi-validation-rule>
        </dx-validator>
      </dx-text-box>

      <!-- Quantité -->
      <br />
      <dx-number-box
        formControlName="quantite"
        valueChangeEvent="keyup"
        [placeholder]="'quantité'"
        (onInput)="onQuantiteChange()"
      >
        <dx-validator #validatorQuantite>
          <dxi-validation-rule type="required"> </dxi-validation-rule>
          <dxi-validation-rule
            type="range"
            [min]="1"
          >
          </dxi-validation-rule>
        </dx-validator>
      </dx-number-box>

      <p
        *ngIf="negativeStock"
        style="color: red"
      >
        Le stock sera négatif avec ce mouvement !
      </p>

      <!-- Actions/Boutons -->
      <br />
      <div class="prompt-action">
        <dx-button
          text="{{ 'btn-annuler' | localize }}"
          type="normal"
          (onClick)="popupComponent.instance.hide()"
        ></dx-button>
        <dx-button
          text="réserver"
          type="default"
          style="float: right"
          *ngIf="validatorCommentaire.instance || validatorQuantite.instance"
          [disabled]="
            !validatorCommentaire.instance.validate().isValid ||
            !validatorQuantite.instance.validate().isValid
          "
          (onClick)="onSubmit()"
        ></dx-button>
      </div>
    </form>
  </div>
</dx-popup>
