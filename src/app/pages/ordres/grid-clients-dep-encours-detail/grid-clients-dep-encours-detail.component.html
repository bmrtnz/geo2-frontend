
<dx-data-grid
class="dx-card wide-card"
[dataSource]="dataSource"
[remoteOperations]="true"
[showBorders]="false"
[columnAutoWidth]="true"
[columnHidingEnabled]="false"
[allowColumnReordering]="true"
[rowAlternationEnabled]="true"
(onCellPrepared)="onCellPrepared($event)"
(onRowPrepared)="onRowPrepared($event)"
(onRowDblClick)="onRowDblClick($event)"
(onToolbarPreparing)="
  gridConfiguratorService.onToolbarPreparing(
    title,
    $event,
    gridConfiguratorService.Grid.DepassementEncoursClient,
    enableFilters.bind(this)
  )
"
>
<!-- Grid configuration -->
<dxo-header-filter
  [visible]="true"
  [allowSearch]="true"
></dxo-header-filter>
<dxo-paging></dxo-paging>
<dxo-pager
  [showPageSizeSelector]="true"
  [showInfo]="true"
  [showNavigationButtons]="true"
></dxo-pager>
<dxo-state-storing
  [storageKey]="gridConfiguratorService.Grid.DepassementEncoursClient"
  [enabled]="true"
  type="custom"
  [customLoad]="gridConfiguratorService.load"
  [customSave]="gridConfiguratorService.save"
></dxo-state-storing>
<dxo-filter-row [visible]="true"></dxo-filter-row>
<dxo-column-chooser
  [enabled]="true"
  mode="select"
  title="{{ 'columnChooser' | localize }}"
  [allowSearch]="true"
  [width]="columnChooser.width"
  [height]="columnChooser.height"
>
</dxo-column-chooser>
<dxi-column
  *ngFor="let column of this.columns | async"
  [dataField]="column.dataField"
  [visible]="false"
  [cssClass]="column.cssClass"
  [width]="column.width"
  [caption]="
    ('encours-clients-' + column.dataField?.split('.').join('-') | localize) ||
    column.name
  "
  [dataType]="column?.dataType"
  [allowSearch]="
    column.allowSearch !== undefined
      ? column.allowSearch
      : ['string'].includes(column.dataType)
  "
  [allowHeaderFiltering]="
    column.allowHeaderFiltering !== undefined
      ? column.allowHeaderFiltering
      : ['string'].includes(column.dataType)
  "
  [showInColumnChooser]="column.showInColumnChooser"
></dxi-column>
</dx-data-grid>

<app-encours-client-popup
  [client]="client"
  (openEncoursOrder)="openOrder($event)"
></app-encours-client-popup>
