<h2 class="content-block">{{ 'ordres-accueil-ordre-title' | localize }}

    <div class="dx-field configuration">
        <div class="dx-field-label">{{ 'ordres-configuration' | localize }}</div>
        <div class="dx-field-value">
            <dx-button
                style="float:right;"
                icon='material-icons settings'
                (onClick)="openTagBox()"
                text=""
            >
            </dx-button>
            <dx-tag-box
                [items]="allIndicators"
                [value]="loadedIndicators"
                [showClearButton]="true"
                [showSelectionControls]="true"
                [searchEnabled]="false"
                applyValueMode="useButtons"
                [displayExpr]="displayExpr"
                (valueChange)="indicatorsChange.emit($event)"
                (onValueChanged)="tileNumber($event)"
            ></dx-tag-box>
        </div>
    </div>
</h2>

<div class="content-block accueilOrdres-page">

    <dx-tile-view 
        class="dx-tile-content"
        width="100%"
        height="100%"
        [baseItemWidth]="145"
        [baseItemHeight]="120"
        [itemMargin]="20"
        direction="vertical"
    >
        <dxi-item
            *ngFor="let indicator of loadedIndicators"
            [widthRatio]="1.5"
            [heightRatio]="1.5"
            [style.background]="'' + indicator.tileBkg + ''"
            [routerLink]="'' + indicator.goTo ? indicator.goTo : '/ordres/accueil' + ''"
            >
            <div class="indicator-container">
                <dx-button *ngIf="indicator.indicatorIcon" type="danger" icon="{{indicator.indicatorIcon}}" class="tile-button indicator-button"></dx-button>
                <div class="number-container">
                    <div *ngIf="indicator.fetchCount" class="indicator">
                        <dx-load-indicator [visible]="indicator.loading" height="40" width="40"></dx-load-indicator>
                        <span *ngIf="!indicator.loading && indicator.number !=='0'">{{indicator.number}}</span>
                    </div>
                    <dx-button *ngIf="!indicator.loading && indicator.warningIcon && indicator.number !=='0'" type="danger" icon="{{indicator.warningIcon}}" class="tile-button warning-button"></dx-button>
                </div>
                <div class="parameter">{{indicator.parameter}}</div>
                <div class="subParameter">{{indicator.subParameter}}</div>
            </div>
        </dxi-item>
    </dx-tile-view>

</div>