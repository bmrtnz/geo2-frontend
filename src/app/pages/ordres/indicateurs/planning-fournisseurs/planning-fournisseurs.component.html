<form class="dx-fieldset" [formGroup]="formGroup">

    <div class="orderTileFilterArea">
        <dx-box>
            <dxi-item [ratio]="3">
        
                <!-- Secteurs -->
                <div class="dx-field field-large">
                    <div class="dx-field-label">{{ 'tiers-clients-secteur' | localize }}</div>
                    <div class="dx-field-value">
                        <dx-select-box #secteurValue
                            [dataSource]="secteurs"
                            displayExpr="description"
                            [searchEnabled]="true"
                            searchExpr="description"
                            (valueChange)="onSecteurChange()"
                        >
                        <dxo-drop-down-options
                            [width]="250">
                        </dxo-drop-down-options>
                        </dx-select-box>
                    </div>
                </div>
        
            </dxi-item>
            <dxi-item [ratio]="5">
                <!-- Période -->
                <div class="dx-field field-small">
                    <div class="dx-field-label">{{ 'ordres-periode' | localize }}</div>
                    <div class="dx-field-value">
                        <dx-select-box #periodeValue
                            [items]="periodes"
                            [value]="periodes[1]"
                            (onValueChanged)="setDates($event)"
                        >
                        </dx-select-box>
                    </div>
                </div>
            </dxi-item>
            <dxi-item [ratio]="2">
                <!-- Date de début -->
                <div class="dx-field field-small">
                    <div class="dx-field-label">{{ 'ordres-du' | localize }}</div>
                    <div class="dx-field-value">
                        <dx-date-box #dateStartValue
                            class="dateStart"
                            [value]="dateStart"
                            type="date"
                            dateSerializationFormat="yyyy-MM-dd"
                            (onValueChanged)="manualDate($event)"
                        ></dx-date-box>
                    </div>
                </div>
            </dxi-item>
            <dxi-item [ratio]="2">
                <!-- Date de fin -->
                <div class="dx-field field-small">
                    <div class="dx-field-label">{{ 'ordres-au' | localize }}</div>
                    <div class="dx-field-value">
                        <dx-date-box #dateEndValue
                            class="dateEnd"
                            [value]="dateEnd"
                            type="date"
                            dateSerializationFormat="yyyy-MM-dd"
                            (onValueChanged)="manualDate($event)"
                        ></dx-date-box>
                    </div>
                </div>
            </dxi-item>
        </dx-box>
    </div>
    <br>

</form>

<div class="tabPanel-planningFournisseurs">
    <dx-tab-panel
        #tabPanel
        [items]="planningFournisseursTypes"
        [selectedIndex]="0"
        [loop]="false"
        [animationEnabled]="true"
        [swipeEnabled]="true"
    >
        <div *dxTemplate="let typePlanning of 'title'">
            <span>{{typePlanning.name}}</span>
        </div>
        <div *dxTemplate="let typePlanning of 'item'">
            <div class="tabpanel-item">

                <!-- Afficher les prix -->
                <div *ngIf="tabPanel.selectedIndex === 0" class="dx-field field-large showPrices-box">
                    <div class="dx-field-value">
                        <dx-check-box #prices
                            (valueChange)="showPrices()"
                        >
                        </dx-check-box>
                    </div>
                    <div class="dx-field-label checkbox-label">{{ 'ordres-planningFournisseurs-afficherPrix' | localize }}</div>
                </div>

                <dx-data-grid
                    [remoteOperations]="true"
                    [showBorders]="false"
                    [focusedRowEnabled]="true"
                    [focusedRowIndex]="0"
                    [columnAutoWidth]="true"
                    [columnHidingEnabled]="false"
                    [allowColumnReordering]="true"
                    [scrolling]="{
                    useNative:true
                    }"
                    (onRowDblClick)="onRowDblClick($event)"
                    (onToolbarPreparing)="gridConfiguratorService.onToolbarPreparing('', $event, gridConfiguratorService.Grid.PlanningFournisseurs, enableFilters.bind(this))"
                >
                
                    <!-- Grid configuration -->
                    <dxo-header-filter [visible]="true" [allowSearch]="true"></dxo-header-filter>
                    <dxo-paging></dxo-paging>
                    <dxo-pager
                    [showPageSizeSelector]="true"
                    [showInfo]="true"
                    [showNavigationButtons]="true"
                    [showPageSizeSelector]="true"
                    ></dxo-pager>
                    <dxo-state-storing 
                    [storageKey]="gridConfiguratorService.Grid.PlanningFournisseurs"
                    [enabled]="true"
                    type="custom"
                    [customLoad]="gridConfiguratorService.load"
                    [customSave]="gridConfiguratorService.save"
                    ></dxo-state-storing>
                    <dxo-filter-row [visible]="true"></dxo-filter-row>
                    <dxo-column-fixing [enabled]="true"></dxo-column-fixing>
                    <dxo-column-chooser
                    [enabled]="true"
                    mode="select"
                    title="{{ 'columnChooser' | localize }}"
                    [allowSearch]="true"
                    [width]="columnChooser.width"
                    [height]="columnChooser.height">
                    </dxo-column-chooser>
                    <dxi-column
                    *ngFor="let column of this.columns | async"
                    [dataField]="column.dataField"
                    [visible]="false"
                    trueText="Oui"
                    falseText="Non"
                    [dataType]="column?.dataType"
                    [allowSearch]="column?.allowSearch || ['string'].includes(column?.dataType)"
                    [allowHeaderFiltering]="column?.allowHeaderFiltering || ['string'].includes(column?.dataType)"
                    [showInColumnChooser]="column.showInColumnChooser"
                    ></dxi-column>
                
                </dx-data-grid>
            </div>
        </div>
    </dx-tab-panel>
</div>