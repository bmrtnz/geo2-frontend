<dx-popup
  width="600"
  height="auto"
  [dragEnabled]="true"
  [title]="title"
  (onHiding)="onPopupHiding()"
  (onHidden)="onHidden()"
  (onShown)="onShown()"
  [closeOnOutsideClick]="true"
>
  <div *dxTemplate="let d of 'content'">
    <form #form="ngForm">

      <!-- Title shown (if configured) over the title -->
      <div
        *ngIf="commentTitle"
        class="comment-title"
      >
      {{ commentTitle }}
      <br>
      </div>

      <!-- We can show a simple text box or a selectbox with configurable items -->

      <dx-select-box
        ngModel
        #commentSelectBox
        name="commentaireSB"
        [visible]="!!commentItemsList"
        [items]="commentItemsList"
        [searchEnabled]="false"
      >
        <dx-validator
          #validatorSB
          [validationRules]="commentValidationRules"
          name="{{ 'valide-commentaire' | localize }}"
        ></dx-validator>
      </dx-select-box>
      <br>

      <dx-text-box
        ngModel
        #commentBox
        [visible]="!commentItemsList"
        name="commentaire"
        valueChangeEvent="keyup"
        [showClearButton]="true"
        [placeholder]="placeholder"
      >
        <dx-validator
          #validator
          [validationRules]="commentValidationRules"
          name="{{ 'valide-motif' | localize }}"
        ></dx-validator>
      </dx-text-box>
      <br>
      <br>
      <br>
      <div class="prompt-action">
        <dx-button
          text="{{ (cancelText ? cancelText : 'btn-annuler') | localize }}"
          type="normal"
          (onClick)="popupComponent.instance.hide()"
        ></dx-button>
        <dx-button
          text="{{ (validText ? validText : 'btn-valider') | localize }}"
          type="default"
          *ngIf="validator.instance"
          [disabled]="!validator.instance.validate().isValid && !validatorSB.instance.validate().isValid"
          (onClick)="onSubmit(form)"
        ></dx-button>
      </div>
    </form>
  </div>
</dx-popup>

